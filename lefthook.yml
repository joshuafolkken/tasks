pre-commit:
  parallel: true
  commands:
    prevent-main-commit:
      skip: git diff --cached --quiet
      run: pnpm run prevent-main-commit

    audit:
      run: pnpm audit

    cspell:
      run: pnpm exec cspell {staged_files}

    prettier:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte,html,css,scss,md,mdx,json,jsonc,yaml,yml}'
      run: pnpm exec prettier --check --ignore-unknown {staged_files}

    eslint:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte}'
      run: pnpm exec eslint --quiet --cache --cache-strategy content {staged_files}

  fail_text: |
    ðŸš« Commit blocked due to quality checks failure
    Please fix the issues above and try again.

    Quick fixes:
    â€¢ Run `pnpm run format` to auto-format code
    â€¢ Run `pnpm run lint` to check and fix linting issues
    â€¢ Run `pnpm run check` to verify TypeScript types

commit-msg:
  commands:
    check-commit-message:
      run: pnpm run check-commit-message {1}

pre-push:
  parallel: true
  commands:
    type-check:
      glob: '*.{svelte,ts,js,mjs,cjs}'
      run: pnpm run check

    test-unit:
      # glob: '*.{svelte,ts,js,css}'
      run: pnpm run test:unit --run

    test-e2e:
      glob: '{*.{svelte,ts,js,mjs,cjs},package.json}'
      run: pnpm run test:e2e

  fail_text: |
    ðŸš« Push blocked due to build or test failures
    Please resolve the issues above before pushing.

    Troubleshooting:
    â€¢ Check build errors: `pnpm run build`
    â€¢ Run tests locally: `pnpm run test:unit` and `pnpm run test:e2e`
